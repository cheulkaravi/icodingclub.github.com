<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="description" content="A step-by-step tutorial for creating a modular template based widget in DOJO.We will create a simple counter widget first and put the event on it">
    <title>Dojo Toolkit Tutorial (AMD): Simple template based widget using AMD concepts</title>
    <link rel="stylesheet" type="text/css" href="/resource/css/base.min.css">
    <link rel="shortcut icon" href="/resource/image/favicon.png" />
</head>

<body>
    <header>
        <section class="author">
            <div class="info">
                <h1>Praveen Singh</h1>
                <h2>-Author</h2>
            </div>
            <a href="/about.html">
                <div class="pic"></div>
            </a>
        </section>
        <a class="logo" href="http://icodingclub.github.com/">
            <h1>&lt;icodingclub/&gt;
                <h1>
        </a>
    </header>
    <div id="tableContainer">
        <section class="main demo-wrraper">

            <section>
                <h1 class="section-heading">Introduction`
                    <span class="arrow"></span>
                </h1>
                <br>
                <h1 class="articleTitle">Dojo Toolkit Tutorial (AMD): Simple template based widget using AMD concepts</h1>
                <p>A step-by-step tutorial for creating a modular template based widget in DOJO.
                    <br>We will create a simple counter widget first and put the event on it.</p>

            </section>
            <section>
                <h1 class="section-heading">step by step video tutorial
                    <span class="arrow"></span>
                </h1>
                <br>

                <br>
                <iframe width="640" height="480" src="//www.youtube.com/embed/INtWDlW82DE" frameborder="0" allowfullscreen></iframe>
            </section>

            <section>
                <h1 class="section-heading">Setup
                    <span class="arrow"></span>
                </h1>
                <br/>

                <ol>
                    <li>Build package structure like below.
                        <br>
                        <br>
                        <img src="image/dojo-template-widget.png">


                    </li>
                    <li>Run everything in a server. If you are on mac, Simplest way is, run: python -m SimpleHTTPServer 8888 at DOJO_TEST level. On window....find similar way.</li>
                </ol>

            </section>
            <section>
                <h1 class="section-heading">Code
                    <span class="arrow"></span>
                </h1>
                <br/>

                <h3>A simple hook up index file</h3>
                <br>

                <div class="path">
                    <span>Path:</span>DOJO_TEST/app/widget/index.html</div>
                <pre class="prettyprint lang-html">
&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
 &lt;title&gt;Counter&lt;/title&gt;
 &lt;script&gt;
 var dojoConfig = {
 async: true,
 packages: [{
 name: "app",
 location: "/DOJO_TEST/app"
 }]
 };
 &lt;/script&gt;

&lt;/head&gt;

&lt;body&gt;
 &lt;div id="widgetContainer"&gt;&lt;/div&gt;

 &lt;script src="/DOJO_TEST/lib/dojo/dojo/dojo.js" data-dojo-config="async: true"&gt;&lt;/script&gt;
 &lt;script type="text/javascript"&gt;

 require(["app/widget/SimpleWidget"],
 function(SimpleWidget) {
 var widget = new SimpleWidget();
 widget.placeAt("widgetContainer");
 });
 &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;

                </pre>

                <br>
                <h3>Create a septate file for template and put the code like below</h3>
                <div class="path">
                    <span>Path:</span>DOJO_TEST/app/widget/templates/counterView.html</div>
                <pre class="prettyprint lang-html">

&lt;div&gt;
 &lt;span&gt;0&lt;/span&gt;
 &lt;br&gt;
 &lt;button&gt;Increment&lt;/button&gt;&amp;nbsp;
 &lt;button&gt;Decrement&lt;/button&gt;
&lt;/div&gt;

                </pre>
                <br>
                <h3>A simple AMD module of counter widget.</h3>


                <div class="path">
                    <span>Path:</span>DOJO_TEST/app/widget/SimpleWidget.js</div>
                <pre class="prettyprint lang-js">

/**
 * define() is a foundational AMD API.
 * It allows us to define a module and its dependencies.
 * Once dojo/query and dojo/on are loaded (which doesn't happen until their dependencies are loaded, and so on),
 * the callback function is called and module instance passed to it.
 */
define([
    "dojo/_base/declare",
    "dojo/on",
    "dijit/_WidgetBase",
    "dijit/_TemplatedMixin",
    "dojo/text!./templates/counterView.html"
], function(declare, on, _WidgetBase, _TemplatedMixin, template) {

    /**
     * dijit._WidgetBase is the base class for all widgets in dijit, and in general
     * is the base class for all dojo based widgets.
     *
     * It provide life cycle method which get called at diffrent stages
     *
     */
    return declare([_WidgetBase, _TemplatedMixin], {

        /**
         * templateString is property used by _TemplatedMixin, to get the HTML template and put attach point
         * and event on it.
         * @type {[type]}
         */
        templateString: template,

        /**
         * constructor method will be called before the parameters are mixed into the widget,
         * and can be used to initialize arrays
         */
        constructor: function() {
            console.log("in constructor");
        },

        /**
         * Most used life cycle method of _WidgetBase.
         * At this stage, widget has been rendered but not attached to node.
         */
        postCreate: function() {
            console.log("in postCreate");

        }
    });
});

                </pre>
    <br><br>
                <blockquote class="info">
                    <ul>
                        <li>by this time your module should loaded.</li>
                        <li>You must be getting view: Two button and one label saying "0"</li>
                        <li>Nothing will happen if you click the button</li>
                    </ul>
                </blockquote>

                <br>
                <br>
                <h3>Let's upgrade and put event on the view.</h3>

                <div class="path">
                    <span>Path:</span>DOJO_TEST/app/widget/templates/counterView.html</div>
                <pre class="prettyprint lang-html">

&lt;div&gt;
 &lt;span data-dojo-attach-point="output"&gt;&lt;/span&gt;
 &lt;br&gt;
 &lt;button data-dojo-attach-point="inc" data-dojo-attach-event="onclick:incCounter"&gt;Increment&lt;/button&gt;&amp;nbsp;
 &lt;button data-dojo-attach-point="dec" data-dojo-attach-event="onclick:decrCounter"&gt;Decrement&lt;/button&gt;
&lt;/div&gt;
                </pre>


<br>
                <h3>Let's upgrade and put the handler for events.</h3>
                <div class="path">
                    <span>Path:</span>DOJO_TEST/app/widget/SimpleWidget.js</div>
                <pre class="prettyprint lang-js">

                /**
 * define() is a foundational AMD API.
 * It allows us to define a module and its dependencies.
 * Once dojo/query and dojo/on are loaded (which doesn't happen until their dependencies are loaded, and so on),
 * the callback function is called and module instance passed to it.
 */
define([
    "dojo/_base/declare",
    "dojo/on",
    "dijit/_WidgetBase",
    "dijit/_TemplatedMixin",
    "dojo/text!./templates/counterView.html"
], function(declare, on, _WidgetBase, _TemplatedMixin, template) {

    /**
     * dijit._WidgetBase is the base class for all widgets in dijit, and in general
     * is the base class for all dojo based widgets.
     *
     * It provide life cycle method which get called at diffrent stages
     *
     */
    return declare([_WidgetBase, _TemplatedMixin], {

        /**
         * templateString is property used by _TemplatedMixin, to get the HTML template and put attach point
         * and event on it.
         * @type {[type]}
         */
        templateString: template,

        counter: 0,

        /**
         * constructor method will be called before the parameters are mixed into the widget,
         * and can be used to initialize arrays
         */
        constructor: function() {
            console.log("in constructor");
        },

        /**
         * Most used life cycle method of _WidgetBase.
         * At this stage, widget has been rendered but not attached to node.
         */
        postCreate: function() {
            console.log("in postCreate");
            this.output.innerHTML = this.counter;

        },

        /**
         * Increases counter value to one.
         */
        incCounter: function() {
            console.log("in incCounter");
            this.output.innerHTML = (++this.counter);

        },

        /**
         * Decrease counter value to one.
         */
        decrCounter: function() {
            console.log("in decrCounter");
            this.output.innerHTML = (--this.counter);

        }

    });
});

                </pre>

                <br><br>
                <h3>On refreshing the HTML, you should get output like below</h3>
                <img src="image/dojo-template-output.png">

            </section>

            <section>
                <h1 class="section-heading">More DOJO Article
                    <span class="arrow"></span>
                </h1>
                <br/>

                <blockquote class="morearticle">
                    Go on the <a href="http://icodingclub.github.io/">main page</a> for more DOJO articles
                </blockquote>
            </section>

            <section>
                <h1 class="section-heading">comments
                    <span class="arrow"></span>
                </h1>
                <div id="disqus_thread"></div>
            </section>
        </section>
        <aside class="add" id="addContainer">
        </aside>
    </div>
    </div>
    <footer id="footer">
    </footer>


    <script type="text/javascript" src="/resource/js/base.min.js"></script>
    <script type="text/javascript">
    addMgr.init();
    disqMgr.init('icodingclubdojo');
    </script>

    <script async src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=css&skin=sunburst"></script>

</body>

</html>
